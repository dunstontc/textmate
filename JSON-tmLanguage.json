{
    "$schema": "http://json-schema.org/draft-06/schema#",
    "$id": "https://raw.githubusercontent.com/dunstontc/textmate/master/JSON-tmLanguage.json",
    "title": "JSON schema for *-tmLanguage.json language definitions used by VSCode.",
    "description": "See: https://github.com/Microsoft/vscode/tree/master/extensions",
    "type": "object",
    "required": [
        "name",
        "scopeName",
        "patterns"
    ],
    "definitions": {

        "contentName": { "type":"string", "pattern": "[a-zA-Z\\-.]+" },
        "include":   { "type":"string", "pattern": "#?[a-zA-Z\\-.]+" },
        "match": {
            "description": "A regular expression which is used to identify the portion of text to which the name should be assigned.",
            "type": "string",
            "format": "regex"
        },
        "begin": { "type": "string", "format": "regex" },
        "while": { "type": "string", "format": "regex" },
        "end":   { "type": "string", "format": "regex" },


        "captures":      { "type": "object", "items": { "$ref": "#/definitions/scopeName" } },
        "beginCaptures": { "type": "object", "items": { "$ref": "#/definitions/scopeName" } },
        "endCaptures":   { "type": "object", "items": { "$ref": "#/definitions/scopeName" } },

        "pattern": {
            "type": "array",
            "anyOf": [
                { "$ref": "#/definitions/match" },
                { "$ref": "#/definitions/begin" },
                { "$ref": "#/definitions/end" },
                { "$ref": "#/definitions/beginCaptures" },
                { "$ref": "#/definitions/endCaptures" },
                { "$ref": "#/definitions/contentName" }
            ]
        }
    },
    "properties": {
        "version":    {
          "type": "string"
        },
        "name":       {
          "description": "The name which gets assigned to the portion matched.",
          "type": "string"
        },
        "scopeName":  {
          "$ref": "#definitions/scopeName"
        },
        "command":    { "type": "string", "description": "idk" },
        "uuid":       { "type": "string", "description": "DEPRECATED" },
        "patterns":   { "type": "array",  "items": { "$ref": "#/definitions/pattern" } },
        "repository": {
          "description": "Allows you to reference a different language, recursively reference the grammar itself or a rule declared in this fileâ€™s repository.",
          "type": "object"
        }
    }
}
